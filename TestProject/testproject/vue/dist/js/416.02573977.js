"use strict";(self["webpackChunktestproject"]=self["webpackChunktestproject"]||[]).push([[416],{3416:function(e,l,a){a.r(l),a.d(l,{default:function(){return y}});var t=a(6252);const o={style:{margin:"10px"}},i={style:{margin:"10px 0"}},s=(0,t.Uk)("新增"),r={style:{margin:"10px 0"}},d=(0,t.Uk)(),m=(0,t.Uk)("查询"),n=(0,t.Uk)("编辑"),p=(0,t.Uk)("删除"),u=(0,t.Uk)("点击上传"),c={class:"dialog-footer"},h=(0,t.Uk)("撤销"),g=(0,t.Uk)("确定");function f(e,l,a,f,w,b){const k=(0,t.up)("el-button"),W=(0,t.up)("el-input"),y=(0,t.up)("el-table-column"),V=(0,t.up)("el-image"),U=(0,t.up)("el-popconfirm"),C=(0,t.up)("el-table"),_=(0,t.up)("el-pagination"),z=(0,t.up)("el-form-item"),v=(0,t.up)("el-upload"),S=(0,t.up)("el-form"),x=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.iD)("div",o,[(0,t._)("div",i,[(0,t.Wm)(k,{type:"primary",onClick:b.add},{default:(0,t.w5)((()=>[s])),_:1},8,["onClick"])]),(0,t._)("div",r,[(0,t.Wm)(W,{modelValue:w.search,"onUpdate:modelValue":l[0]||(l[0]=e=>w.search=e),placeholder:"按照书名进行查询",style:{width:"20%"},clearable:""},null,8,["modelValue"]),d,(0,t.Wm)(k,{onClick:b.load},{default:(0,t.w5)((()=>[m])),_:1},8,["onClick"])]),(0,t.Wm)(C,{data:w.tableData,style:{width:"100%"},stripe:"",border:""},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{prop:"id",label:"ID",sortable:""}),(0,t.Wm)(y,{prop:"bookName",label:"书名"}),(0,t.Wm)(y,{prop:"price",label:"价格"}),(0,t.Wm)(y,{prop:"author",label:"作者"}),(0,t.Wm)(y,{prop:"createTime",label:"出版日期"}),(0,t.Wm)(y,{label:"封面",width:"120"},{default:(0,t.w5)((e=>[(0,t.Wm)(V,{style:{width:"100px",height:"100px"},src:e.row.cover,"preview-src-list":[e.row.cover],"preview-teleported":"true"},null,8,["src","preview-src-list"])])),_:1}),(0,t.Wm)(y,{fixed:"right",label:"操作",width:"120"},{default:(0,t.w5)((e=>[(0,t.Wm)(k,{link:"",type:"primary",size:"small",onClick:l=>b.handleEdit(e.row)},{default:(0,t.w5)((()=>[n])),_:2},1032,["onClick"]),(0,t.Wm)(U,{title:"确定要删除？",onConfirm:l=>b.handleDelete(e.row.id)},{reference:(0,t.w5)((()=>[(0,t.Wm)(k,{link:"",type:"primary",size:"small"},{default:(0,t.w5)((()=>[p])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"]),(0,t.Wm)(_,{currentPage:w.currentPage,"onUpdate:currentPage":l[1]||(l[1]=e=>w.currentPage=e),"page-size":w.pageSize,"onUpdate:page-size":l[2]||(l[2]=e=>w.pageSize=e),"page-sizes":[5,10,20],layout:"total, sizes, prev, pager, next, jumper",total:w.total,onSizeChange:l[3]||(l[3]=e=>b.handleSizeChange(w.pageSize)),onCurrentChange:l[4]||(l[4]=e=>b.handleCurrentChange(w.currentPage)),style:{margin:"10px 0"}},null,8,["currentPage","page-size","total"]),(0,t.Wm)(x,{modelValue:w.dialogVisible,"onUpdate:modelValue":l[10]||(l[10]=e=>w.dialogVisible=e),title:"提示",width:"30%"},{footer:(0,t.w5)((()=>[(0,t._)("span",c,[(0,t.Wm)(k,{onClick:l[9]||(l[9]=e=>w.dialogVisible=!1)},{default:(0,t.w5)((()=>[h])),_:1}),(0,t.Wm)(k,{type:"primary",onClick:b.save},{default:(0,t.w5)((()=>[g])),_:1},8,["onClick"])])])),default:(0,t.w5)((()=>[(0,t.Wm)(S,{model:w.form,"label-width":"120px"},{default:(0,t.w5)((()=>[(0,t.Wm)(z,{label:"书名"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{modelValue:w.form.bookName,"onUpdate:modelValue":l[5]||(l[5]=e=>w.form.bookName=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(z,{label:"价格"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{modelValue:w.form.price,"onUpdate:modelValue":l[6]||(l[6]=e=>w.form.price=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(z,{label:"作者"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{modelValue:w.form.author,"onUpdate:modelValue":l[7]||(l[7]=e=>w.form.author=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(z,{label:"出版日期"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{type:"Date",modelValue:w.form.createTime,"onUpdate:modelValue":l[8]||(l[8]=e=>w.form.createTime=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(z,{label:"封面"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{ref:"upload",action:w.filesUploadUrl,"on-success":b.filesUploadSuccess},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{type:"primary"},{default:(0,t.w5)((()=>[u])),_:1})])),_:1},8,["action","on-success"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}var w=a(4471),b={name:"Book",data(){return{search:"",currentPage:1,pageSize:5,total:10,tableData:[],form:{},dialogVisible:!1,filesUploadUrl:"http://"+window.server.filesUploadUrl+":9090/files/upload"}},created(){this.load()},methods:{filesUploadSuccess(e){console.log(e),this.form.cover=e.data},load(){w.Z.get("/book",{params:{pageNum:this.currentPage,pageSize:this.pageSize,search:this.search}}).then((e=>{this.tableData=e.data.records,this.total=e.data.total}))},save(){this.form.id?w.Z.put("/book",this.form).then((e=>{console.log(e),"0"==e.code?this.$message({type:"success",message:"更新成功"}):this.$message({type:"error",message:"更新失败"})})):w.Z.post("/book",this.form).then((e=>{console.log(e),"0"==e.code?this.$message({type:"success",message:"新增成功"}):this.$message({type:"error",message:"新增失败"})})),this.dialogVisible=!1,this.load()},add(){this.dialogVisible=!0,this.form={},this.$nextTick((()=>{this.$refs["upload"].clearFiles()}))},handleEdit(e){this.form=JSON.parse(JSON.stringify(e)),this.dialogVisible=!0},handleDelete(e){w.Z["delete"]("/book/"+e).then((e=>{"0"==e.code?this.$message({type:"success",message:"删除成功"}):this.$message({type:"error",message:"删除失败"})})),this.load()},handleSizeChange(e){this.pageSize=e,this.load()},handleCurrentChange(e){this.currentPage=e,this.load()}}},k=a(3744);const W=(0,k.Z)(b,[["render",f]]);var y=W}}]);
//# sourceMappingURL=416.02573977.js.map